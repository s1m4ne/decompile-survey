# 日報: 2026-01-21

## 概要
リポジトリのドキュメント整備、PDF変換スクリプトの追加、papers/ディレクトリの.gitignore設定を実施。

---

## 作業ログ

### 15:49 - ドキュメント整備・スクリプト追加

#### 実施内容
- 各ディレクトリにREADMEを追加
  - `exports/README.md`
  - `imports/README.md`
  - `logs/README.md`
  - `papers/README.md`
  - `scripts/README.md`
- LlamaParseによるPDF→Markdown変換スクリプトを追加
  - `scripts/llamaparse/parse_pdf.py`
  - `scripts/llamaparse/README.md`
  - `scripts/llamaparse/requirements.txt`

#### コミット
- `796ba48` Add directory READMEs and LlamaParse PDF converter

---

### 16:02 - .gitignore設定（papers/ディレクトリ）

#### 実施内容
papers/ディレクトリの著作権保護のため、以下のファイルをGit追跡から除外：
- `*.pdf` - 論文PDF
- `*.md` - 変換後Markdown（notes.md, README.mdは例外）

#### コミット
- `b5412eb` Exclude PDFs and converted MDs in papers/ from tracking

---

### 16:30頃 - Mistral OCRスクリプト追加（未コミット）

#### 実施内容
- `scripts/mistral_ocr/parse_pdf.py` を追加
- `scripts/mistral_ocr/README.md` を追加
- Mistral OCR 3を使用したPDF変換（画像抽出対応）

#### 料金比較
| ツール | 料金 |
|--------|------|
| LlamaParse (Balanced) | $3 / 1,000ページ |
| Mistral OCR | $1 / 1,000ページ |

---

### 17:00頃 - papers/ディレクトリ整備（未コミット）

#### 実施内容
- `papers/README.md` にAI向けルールを追加
  - BibTeXは自動生成しない
  - notes.mdは指示がない限り生成しない
- `.gitignore` に画像ファイルの除外を追加
  - `papers/**/*.jpeg`
  - `papers/**/*.jpg`
  - `papers/**/*.png`
- `scripts/README.md` にMistral OCRの説明を追加
- `scripts/llamaparse/parse_pdf.py` の型ヒント修正（`str | None` → `Optional[str]`）

---

### 18:00頃 - スクリーニング機能の実装（未コミット）

#### 実施内容
LLMを使った論文スクリーニング機能を実装：
- `screening/` ディレクトリを新規作成
- `screening/scripts/screen.py` - スクリーニングスクリプト
- `screening/history.csv` - 実行履歴
- `screening/runs/` - 各実行の結果を保存

#### 機能
- BibTeXファイルを入力として、各論文をinclude/exclude/uncertainに分類
- OpenAI API（gpt-4o-mini等）を使用
- 判定結果をJSONL/CSV/BibTeXで出力

#### テスト実行
`imports/arXiv/arXiv_decompil_20260115_2350.bib`（55件）でテスト実行。

---

### 19:00頃 - scriptsディレクトリのリネーム（未コミット）

#### 実施内容
scriptsディレクトリのサブディレクトリ名をより適切な名称に変更：

| 旧名 | 新名 | 説明 |
|-----|-----|------|
| `arxiv/` | `bibtex_fetcher/` | arXiv APIからBibTeX取得 |
| `llamaparse/` | `pdf2md_llamaparse/` | LlamaParseでPDF→MD変換 |
| `mistral_ocr/` | `pdf2md_mistral/` | Mistral OCRでPDF→MD変換 |

#### 更新ファイル
- `scripts/README.md`
- `scripts/bibtex_fetcher/README.md`
- `scripts/pdf2md_llamaparse/README.md`
- `scripts/pdf2md_mistral/README.md`
- `README.md`（ルート）

---

### 20:00頃 - 環境設定の統一（未コミット）

#### 実施内容
- `pyproject.toml` をルートに作成（uv対応）
- 各スクリプトの `.env` をルートに統一
- `.env.example` をルートに作成
- 各READMEを `uv run` コマンドに更新
- 不要な `requirements.txt` を削除
- `.gitignore` に `.venv/` を追加

#### 依存関係（pyproject.toml）
- llama-parse
- mistralai
- bibtexparser
- openai
- python-dotenv

---

### 21:00頃 - スクリーニングWebアプリの実装（未コミット）

#### 実施内容
AIスクリーニング結果をレビューするためのWebアプリケーションを実装：
- `screening/app/` ディレクトリを新規作成
- `screening/app/start.sh` - 起動スクリプト

#### バックエンド（FastAPI）
- `screening/app/backend/main.py` - エントリーポイント
- `screening/app/backend/routers/runs.py` - runs/ API
- `screening/app/backend/routers/imports.py` - imports/ API
- `screening/app/backend/routers/reviews.py` - レビュー API
- `screening/app/backend/routers/screening.py` - スクリーニング実行 API

#### フロントエンド（React + TypeScript）
- React 18 + Vite + TailwindCSS
- TanStack Query (React Query)
- React Router
- Lucide Icons

#### 主要機能
1. **Reviews（レビュー）**
   - AI判定結果（include/exclude/uncertain）の確認
   - 手動で分類を変更（AIの結果は保持したまま）
   - チェック済みフラグ・メモの追加
   - 複数選択して一括操作
   - フィルタリング・キーワード検索

2. **Imports（インポート閲覧）**
   - `imports/`内のBibTeXファイルを閲覧
   - 論文詳細・外部リンク表示

3. **Run Screening（スクリーニング実行）**
   - アプリ内から`screen.py`を実行
   - 入力ファイル・ルール・モデル・並列数の設定

#### データ構造
レビューデータは `reviews/{run_id}/review.json` に保存：
- `ai_decision` / `ai_confidence` / `ai_reason` - AI判定（読み取りのみ）
- `manual_decision` - 手動修正後の判定
- `checked` - 確認済みフラグ
- `note` - メモ

最終判定: `final_decision = manual_decision ?? ai_decision`

---

### 論文整理

#### papers/survey/
- `GenAI-for-SAS_arXiv2024/` を作成
  - Generative AI for Self-Adaptive Systems（Li et al., arXiv 2024）

#### papers/decompile/
- `LLM4Decompile_EMNLP2024/` を作成
  - LLM4Decompile: Decompiling Binary Code with Large Language Models

---

## 未コミットの変更

```
modified:   .gitignore（画像除外、.venv追加）
modified:   papers/README.md（AI向けルール追加）
modified:   README.md（scriptsディレクトリ構成更新）
renamed:    scripts/arxiv/ -> scripts/bibtex_fetcher/
renamed:    scripts/llamaparse/ -> scripts/pdf2md_llamaparse/
new file:   scripts/pdf2md_mistral/
new file:   screening/（スクリーニング機能）
new file:   screening/app/（スクリーニングWebアプリ）
new file:   pyproject.toml
new file:   .env.example
```

---

## TODO

- [ ] 未コミット分をコミット
- [ ] LLM4Decompile論文のBibTeX追加
- [ ] GenAI-for-SAS論文のBibTeX追加
- [ ] PDF変換テスト（LlamaParse vs Mistral OCR 比較）
- [ ] スクリーニング基準の策定
- [ ] 全文献でスクリーニング実行

---

## メモ

### PDF変換ツールの比較
- **LlamaParse**: 精度重視、モード選択可能（Fast/Balanced/Premium）
- **Mistral OCR**: コスト重視、画像抽出対応

### .gitignoreの方針
papers/ディレクトリでは以下のみGit追跡：
- `notes.md` - 論文メモ
- `README.md` - ディレクトリ説明
- `paper.bib` - BibTeX

---

## タグ
`#ドキュメント整備` `#gitignore` `#LlamaParse` `#MistralOCR` `#論文整理` `#スクリーニング` `#uv` `#環境設定` `#Webアプリ` `#FastAPI` `#React`
